{
  "run_id": "progress-mlu1fi80-c253de",
  "tool_name": "gsd_progress",
  "workflow_file": "progress.md",
  "workflow_args": {},
  "created_at": "2026-02-19T22:33:47.520Z",
  "updated_at": "2026-02-19T22:33:47.520Z",
  "status": "active",
  "next_step": 1,
  "total_steps": 1,
  "preamble": "",
  "epilogue": "",
  "steps": [
    {
      "number": "1",
      "content": "<next_step_policy>\nAfter completing EACH major step, your response MUST end with a line:\nNext on list: <exact next command/tool and args>\nDo not end a step response without this line.\nAfter workflow completion: Next on list -> call gsd_progress to route to the correct next command.\n</next_step_policy>\n\n<purpose>\nCheck project progress, summarize recent work and what's ahead, then intelligently route to the next action -- either executing an existing plan or creating the next one. Provides situational awareness before continuing work.\n</purpose>\n\n<required_reading>\nRead all files referenced by the invoking prompt's execution_context before starting.\n</required_reading>\n\n<process>\n\n<step name=\"init_context\">\n**Load progress context (with file contents to avoid redundant reads):**\n\nCall the `gsd_init_progress` tool with `{ \"include\": \"state,roadmap,project,config\" }`. Parse the returned JSON.\n\nExtract from init JSON: `project_exists`, `roadmap_exists`, `state_exists`, `phases`, `current_phase`, `next_phase`, `milestone_version`, `completed_count`, `phase_count`, `paused_at`.\n\n**File contents (from include):** `state_content`, `roadmap_content`, `project_content`, `config_content`. These are null if files don't exist.\n\nIf `project_exists` is false (no `.planning/` directory):\n\n```\nNo planning structure found.\n\nRun the `gsd_new_project` tool to start a new project.\n```\n\nExit.\n\nIf missing STATE.md: suggest the `gsd_new_project` tool.\n\n**If ROADMAP.md missing but PROJECT.md exists:**\n\nThis means a milestone was completed and archived. Go to **Route F** (between milestones).\n\nIf missing both ROADMAP.md and PROJECT.md: suggest the `gsd_new_project` tool.\n</step>\n\n<step name=\"load\">\n**Use project context from INIT:**\n\nAll file contents are already loaded via include in init_context step:\n- `state_content` -- living memory (position, decisions, issues)\n- `roadmap_content` -- phase structure and objectives\n- `project_content` -- current state (What This Is, Core Value, Requirements)\n- `config_content` -- settings (model_profile, workflow toggles)\n\nNo additional file reads needed.\n</step>\n\n<step name=\"analyze_roadmap\">\n**Get comprehensive roadmap analysis (replaces manual parsing):**\n\nCall the `gsd_roadmap_get_phase` tool to get phase details. This returns structured JSON with:\n- All phases with disk status (complete/partial/planned/empty/no_directory)\n- Goal and dependencies per phase\n- Plan and summary counts per phase\n- Aggregated stats: total plans, summaries, progress percent\n- Current and next phase identification\n\nUse this instead of manually reading/parsing ROADMAP.md.\n</step>\n\n<step name=\"recent\">\n**Gather recent work context:**\n\n- Find the 2-3 most recent SUMMARY.md files\n- Use the `gsd_summary_extract` tool for efficient parsing with `{ \"path\": \"<path>\", \"fields\": \"one_liner\" }`\n- This shows \"what we've been working on\"\n  </step>\n\n<step name=\"position\">\n**Parse current position from init context and roadmap analysis:**\n\n- Use `current_phase` and `next_phase` from roadmap analyze\n- Use phase-level `has_context` and `has_research` flags from analyze\n- Note `paused_at` if work was paused (from init context)\n- Count pending todos: use the `gsd_init_todos` tool or `gsd_list_todos` tool\n- Check for active debug sessions: `ls .planning/debug/*.md 2>/dev/null | grep -v resolved | wc -l`\n  </step>\n\n<step name=\"report\">\n**Generate progress bar from gsd-tools, then present rich status report:**\n\nCall the `gsd_init_progress` tool to get the formatted progress bar.\n\nPresent:\n\n```\n# [Project Name]\n\n**Progress:** {PROGRESS_BAR}\n**Profile:** [quality/balanced/budget]\n\n## Recent Work\n- [Phase X, Plan Y]: [what was accomplished - 1 line from summary-extract]\n- [Phase X, Plan Z]: [what was accomplished - 1 line from summary-extract]\n\n## Current Position\nPhase [N] of [total]: [phase-name]\nPlan [M] of [phase-total]: [status]\nCONTEXT: [if has_context | - if not]\n\n## Key Decisions Made\n- [decision 1 from STATE.md]\n- [decision 2]\n\n## Blockers/Concerns\n- [any blockers or concerns from STATE.md]\n\n## Pending Todos\n- [count] pending -- use `gsd_check_todos` tool to review\n\n## Active Debug Sessions\n- [count] active -- use `gsd_debug` tool to continue\n(Only show this section if count > 0)\n\n## What's Next\n[Next phase/plan objective from roadmap analyze]\n```\n\n</step>\n\n<step name=\"route\">\n**Determine next action based on verified counts.**\n\n**Step 1: Count plans, summaries, and issues in current phase**\n\nList files in the current phase directory:\n\n```bash\nls -1 .planning/phases/[current-phase-dir]/*-PLAN.md 2>/dev/null | wc -l\nls -1 .planning/phases/[current-phase-dir]/*-SUMMARY.md 2>/dev/null | wc -l\nls -1 .planning/phases/[current-phase-dir]/*-UAT.md 2>/dev/null | wc -l\n```\n\nState: \"This phase has {X} plans, {Y} summaries.\"\n\n**Step 1.5: Check for unaddressed UAT gaps**\n\nCheck for UAT.md files with status \"diagnosed\" (has gaps needing fixes).\n\n```bash\n# Check for diagnosed UAT with gaps\ngrep -l \"status: diagnosed\" .planning/phases/[current-phase-dir]/*-UAT.md 2>/dev/null\n```\n\nTrack:\n- `uat_with_gaps`: UAT.md files with status \"diagnosed\" (gaps need fixing)\n\n**Step 2: Route based on counts**\n\n| Condition | Meaning | Action |\n|-----------|---------|--------|\n| uat_with_gaps > 0 | UAT gaps need fix plans | Go to **Route E** |\n| summaries < plans | Unexecuted plans exist | Go to **Route A** |\n| summaries = plans AND plans > 0 | Phase complete | Go to Step 3 |\n| plans = 0 | Phase not yet planned | Go to **Route B** |\n\n---\n\n**Route A: Unexecuted plan exists**\n\nFind the first PLAN.md without matching SUMMARY.md.\nRead its `<objective>` section.\n\n```\n---\n\n## Next Up\n\n**{phase}-{plan}: [Plan Name]** -- [objective summary from PLAN.md]\n\nUse the `gsd_execute_phase` tool with `{ \"phase\": \"{phase}\" }`\n\nStart a fresh conversation for best results\n\n---\n```\n\n---\n\n**Route B: Phase needs planning**\n\nCheck if `{phase_num}-CONTEXT.md` exists in phase directory.\n\n**If CONTEXT.md exists:**\n\n```\n---\n\n## Next Up\n\n**Phase {N}: {Name}** -- {Goal from ROADMAP.md}\nContext gathered, ready to plan\n\nUse the `gsd_plan_phase` tool with `{ \"phase\": \"{phase-number}\" }`\n\nStart a fresh conversation for best results\n\n---\n```\n\n**If CONTEXT.md does NOT exist:**\n\n```\n---\n\n## Next Up\n\n**Phase {N}: {Name}** -- {Goal from ROADMAP.md}\n\nUse the `gsd_discuss_phase` tool with `{ \"phase\": \"{phase}\" }` -- gather context and clarify approach\n\nStart a fresh conversation for best results\n\n---\n\n**Also available:**\n- `gsd_plan_phase` tool -- skip discussion, plan directly\n- `gsd_list_phase_assumptions` tool -- see Claude's assumptions\n\n---\n```\n\n---\n\n**Route E: UAT gaps need fix plans**\n\nUAT.md exists with gaps (diagnosed issues). User needs to plan fixes.\n\n```\n---\n\n## UAT Gaps Found\n\n**{phase_num}-UAT.md** has {N} gaps requiring fixes.\n\nUse the `gsd_plan_phase` tool with `{ \"phase\": \"{phase}\", \"gaps\": true }`\n\nStart a fresh conversation for best results\n\n---\n\n**Also available:**\n- `gsd_execute_phase` tool -- execute phase plans\n- `gsd_verify_work` tool -- run more UAT testing\n\n---\n```\n\n---\n\n**Step 3: Check milestone status (only when phase complete)**\n\nRead ROADMAP.md and identify:\n1. Current phase number\n2. All phase numbers in the current milestone section\n\nCount total phases and identify the highest phase number.\n\nState: \"Current phase is {X}. Milestone has {N} phases (highest: {Y}).\"\n\n**Route based on milestone status:**\n\n| Condition | Meaning | Action |\n|-----------|---------|--------|\n| current phase < highest phase | More phases remain | Go to **Route C** |\n| current phase = highest phase | Milestone complete | Go to **Route D** |\n\n---\n\n**Route C: Phase complete, more phases remain**\n\nRead ROADMAP.md to get the next phase's name and goal.\n\n```\n---\n\n## Phase {Z} Complete\n\n## Next Up\n\n**Phase {Z+1}: {Name}** -- {Goal from ROADMAP.md}\n\nUse the `gsd_discuss_phase` tool with `{ \"phase\": \"{Z+1}\" }` -- gather context and clarify approach\n\nStart a fresh conversation for best results\n\n---\n\n**Also available:**\n- `gsd_plan_phase` tool -- skip discussion, plan directly\n- `gsd_verify_work` tool -- user acceptance test before continuing\n\n---\n```\n\n---\n\n**Route D: Milestone complete**\n\n```\n---\n\n## Milestone Complete\n\nAll {N} phases finished!\n\n## Next Up\n\n**Complete Milestone** -- archive and prepare for next\n\nUse the `gsd_complete_milestone` tool\n\nStart a fresh conversation for best results\n\n---\n\n**Also available:**\n- `gsd_verify_work` tool -- user acceptance test before completing milestone\n\n---\n```\n\n---\n\n**Route F: Between milestones (ROADMAP.md missing, PROJECT.md exists)**\n\nA milestone was completed and archived. Ready to start the next milestone cycle.\n\nRead MILESTONES.md to find the last completed milestone version.\n\n```\n---\n\n## Milestone v{X.Y} Complete\n\nReady to plan the next milestone.\n\n## Next Up\n\n**Start Next Milestone** -- questioning -> research -> requirements -> roadmap\n\nUse the `gsd_new_milestone` tool\n\nStart a fresh conversation for best results\n\n---\n```\n\n</step>\n\n<step name=\"edge_cases\">\n**Handle edge cases:**\n\n- Phase complete but next phase not planned -> offer `gsd_plan_phase` tool\n- All work complete -> offer milestone completion\n- Blockers present -> highlight before offering to continue\n- Handoff file exists -> mention it, offer `gsd_resume_work` tool\n  </step>\n\n</process>\n\n<success_criteria>\n\n- [ ] Rich context provided (recent work, decisions, issues)\n- [ ] Current position clear with visual progress\n- [ ] What's next clearly explained\n- [ ] Smart routing: `gsd_execute_phase` tool if plans exist, `gsd_plan_phase` tool if not\n- [ ] User confirms before any action\n- [ ] Seamless handoff to appropriate tool\n      </success_criteria>\n</output>"
    }
  ],
  "history": []
}